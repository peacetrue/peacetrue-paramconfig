!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("iview"),require("axios"),require("lodash"),require("peacetrue-iview/src/components/page-table"),require("peacetrue-async-validator")):"function"==typeof define&&define.amd?define(["iview","axios","lodash","peacetrue-iview/src/components/page-table","peacetrue-async-validator"],t):"object"==typeof exports?exports.ParamConfigList=t(require("iview"),require("axios"),require("lodash"),require("peacetrue-iview/src/components/page-table"),require("peacetrue-async-validator")):e.ParamConfigList=t(e.iview,e.axios,e._,e.PeaceIview.PageTable,e.Peace.AsyncValidator)}(this,function(__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__2__,__WEBPACK_EXTERNAL_MODULE__3__,__WEBPACK_EXTERNAL_MODULE__4__,__WEBPACK_EXTERNAL_MODULE__6__){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){let{Card:i,Form:a,FormItem:n,Input:o,Icon:l,Button:d,InputNumber:s,DatePicker:u}=r(1),m=r(2),c=r(3),p=r(4),y=r(5),{Rules:f,Generator:_,setFields:h}=r(6);e.exports={name:"ParamConfigList",template:'\n    <div class="param-config-list">\n        <Card v-show="mode==\'page\'">\n            <span slot="title">查询条件</span>\n            <Form ref="form" :model="params" inline>\n                <FormItem prop="code">\n                    <Input type="text" v-model="params.code" placeholder="编号"/>\n                </FormItem>\n                <FormItem prop="name">\n                    <Input type="text" v-model="params.name" placeholder="名称"/>\n                </FormItem>\n                <FormItem prop="createdTime.lowerBound">\n                    <DatePicker type="date" placeholder="创建起始时间" v-model="params.createdTime.lowerBound"></DatePicker>\n                </FormItem>\n                <FormItem prop="createdTime.upperBound">\n                    <DatePicker type="date" placeholder="创建结束时间" v-model="params.createdTime.upperBound"></DatePicker>\n                </FormItem>\n                <FormItem >\n                    <Button type="primary" @click="query(true)">查询</Button>\n                    <Button @click="reset">清空</Button>\n                </FormItem>\n            </Form>\n        </Card>\n        <Row class="operation-bar" v-show="mode==\'page\'">\n            <Col span="24">\n                <Button type="primary" size="small" @click="openAdd()">新增</Button>\n                &nbsp;\n                <Button type="primary" size="small" @click="remove()">删除</Button>\n            </Col>\n        </Row>\n        <Card>\n            <div slot="title">查询结果</div>\n            <page-table ref="pageTable" :url="url" :columns="columns" v-model="params" :success-format="successFormat"></page-table>\n        </Card>\n        <Modal v-model="detail.model" :title="detail.title">\n            <Form ref="detail" :model="detail.data" :rules="detail.rules" :label-width="100">\n                <FormItem label="编号" prop="code">\n                    <i-input type="text" v-model="detail.data.code" placeholder="必填、长度1~31" :readonly="detail.readonly.code" :class="detail.style.code"></i-input>\n                </FormItem>\n                <FormItem label="名称" prop="name">\n                    <i-input type="text" v-model="detail.data.name" placeholder="必填、长度1~255" :readonly="detail.readonly.name" :class="detail.style.name"></i-input>\n                </FormItem>\n                <FormItem label="值" prop="value">\n                    <i-input type="text" v-model="detail.data.value" placeholder="必填、长度1~255" :readonly="detail.readonly.value" :class="detail.style.value"></i-input>\n                </FormItem>\n                <FormItem label="备注" prop="remark">\n                    <i-input type="text" v-model="detail.data.remark" placeholder="选填、长度1~255" :readonly="detail.readonly.remark" :class="detail.style.remark"></i-input>\n                </FormItem>\n                <FormItem label="创建者" prop="creatorId" :class="detail.style.creatorId">\n                    <i-input type="text" v-model="detail.data.creatorId" :readonly="detail.readonly.creatorId" :class="detail.style.creatorId"></i-input>\n                </FormItem>\n                <FormItem label="创建时间" prop="createdTime" :class="detail.style.createdTime">\n                    <i-input type="text" v-model="detail.data.createdTime" :readonly="detail.readonly.createdTime" :class="detail.style.createdTime"></i-input>\n                </FormItem>\n            </Form>\n            <div slot="footer" v-show="save">\n                <i-button type="success" size="large" long :loading="detail.loading" @click="save">提交</i-button>\n            </div>  \n        </Modal>      \n    </div>\n    ',props:{mode:{type:String,required:!1,default:"page"},url:{type:String,required:!1,default:"/param-configs"},uniqueUrl:{type:String,required:!1,default:"/common/param-configs/unique"},params:{type:Object,required:!1,default:()=>({page:0,size:10,code:null,name:null,createdTime:{lowerBound:null,upperBound:null}})},successFormat:{type:Function,required:!1,default:e=>e},columns:{type:Array,required:!1,default(){return[{type:"selection",width:60,align:"center"},{title:"编号",key:"code",width:150,tooltip:!0},{title:"名称",key:"name",width:150,tooltip:!0},{title:"值",key:"value",width:200,tooltip:!0},{title:"备注",key:"remark",width:300,tooltip:!0},{title:"创建者",key:"creatorId",width:120},{title:"创建时间",key:"createdTime",width:200,tooltip:!0,sortable:"custom",sortType:"desc"},{title:"修改者",key:"modifierId",width:130},{title:"修改时间",key:"modifiedTime",width:200},{title:"操作",width:200,fixed:"right",render:(e,t)=>this.renderOperate(e,t)}]}}},data:()=>(h({code:"编号",name:"名称",value:"值",remark:"备注"}),{detail:{model:!1,loading:!1,data:{},readonly:{},style:{},rules:_.generate({code:[{required:!0},{max:31}],name:[{required:!0},{max:255}],value:[{required:!0},{max:255}],remark:[{max:255}]})}}),methods:{query(e){this.$refs.pageTable.query(e)},renderOperate(e,t){let r=[e(d,{props:{type:"primary",size:"small"},on:{click:()=>this.openView(t.row)}},"查看")," ",e(d,{props:{type:"primary",size:"small"},on:{click:()=>this.openModify(t.row)}},"修改")," ",e(d,{props:{type:"primary",size:"small"},on:{click:()=>this.remove(t.row)}},"删除")];return e("div",r)},reset(){return this.$refs.form.resetFields(),this.query(!0)},save(){},openView(e){this.detail.model=!0,this.detail.title="查看参数配置",this.detail.data=e,this.detail.readonly={code:!0,name:!0,value:!0,remark:!0,creatorId:!0,createdTime:!0},this.detail.style={code:"readonly",name:"readonly",value:"readonly",remark:"readonly",creatorId:"readonly",createdTime:"readonly"},this.save=null},openAdd(){this.detail.model=!0,this.detail.title="创建参数配置",this.detail.data={},this.detail.readonly=!1,this.detail.style=null,this.detail.readonly={code:!1,name:!1,value:!1,remark:!1,creatorId:!0,createdTime:!0},this.detail.style={code:null,name:null,value:null,remark:null,creatorId:"hidden",createdTime:"hidden"},this.$refs.form.resetFields(),this.save=this.add},add(){this.$refs.detail.validate(e=>{e&&this.promiseConfirm("确认要创建参数配置么？").then(()=>{this.detail.loading=!0;let e=c.cloneDeep(this.detail.data);m.post(this.url,e).then(e=>{this.detail.model=!1,this.query(!0)}).finally(e=>this.detail.loading=!1)})})},openModify(e){this.detail.model=!0,this.detail.title="修改参数配置",this.detail.data=c.merge({},e),this.detail.readonly={code:!0,name:!1,value:!1,remark:!1,creatorId:!0,createdTime:!0},this.detail.style={code:"readonly",name:null,value:null,remark:null,creatorId:"readonly",createdTime:"readonly"},this.$refs.form.resetFields(),this.save=this.modify},modify(){this.$refs.detail.validate(e=>{e&&this.promiseConfirm("确认要修改么？").then(()=>{this.detail.loading=!0;let e=c.cloneDeep(this.detail.data);m.put(this.url,e).then(e=>{this.detail.model=!1,this.query(!0)}).finally(e=>this.detail.loading=!1)})})},remove(e){if(e)e=[e];else{let t=this.$refs.pageTable.selection;if(0===t.length)return this.$Message.warning("尚未选中任何记录!");e=t}this.promiseConfirm("确认要删除么？").then(()=>{m.delete(`${this.url}?${e.map(e=>"id="+e.id).join("&")}`).then(e=>{this.query(!0)})})}},components:{Card:i,Form:a,FormItem:n,Input:o,Icon:l,Button:d,InputNumber:s,DatePicker:u,PageTable:p},mixins:[y]}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__2__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__3__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__4__},function(module,exports,__webpack_require__){var factory;factory=function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/mixins/promise-confirm.js")}({"./src/mixins/promise-confirm.js":
/*!***************************************!*\
  !*** ./src/mixins/promise-confirm.js ***!
  \***************************************/
/*! no static exports found */function(module,exports){eval("module.exports = {\n    methods: {\n        promiseConfirm(title, content) {\n            return new Promise((resolve, reject) => {\n                this.$Modal.confirm({\n                    title: title,\n                    content: content,\n                    onOk: () => {\n                        resolve();\n                    },\n                    onCancel() {\n                        reject();\n                    }\n                });\n            });\n        },\n    },\n};\n\n\n\n//# sourceURL=webpack://PeaceIview.%5Bname%5D/./src/mixins/promise-confirm.js?")}})},module.exports=factory()},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__6__}])});
//# sourceMappingURL=param-config-list.js.map